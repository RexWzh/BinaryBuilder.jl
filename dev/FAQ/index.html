<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>常见问题 · BinaryBuilder.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">BinaryBuilder.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">主页</a></li><li><a class="tocitem" href="../building/">构建包</a></li><li><a class="tocitem" href="../build_tips/">构建提示</a></li><li><a class="tocitem" href="../jll/">JLL 包</a></li><li class="is-active"><a class="tocitem" href>常见问题</a></li><li><a class="tocitem" href="../troubleshooting/">构建故障排除</a></li><li><span class="tocitem">内部</span><ul><li><a class="tocitem" href="../rootfs/">根文件系统</a></li><li><a class="tocitem" href="../environment_variables/">环境变量</a></li><li><a class="tocitem" href="../tricksy_gotchas/">棘手的陷阱</a></li><li><a class="tocitem" href="../reference/">引用</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>常见问题</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>常见问题</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/RexWzh/BinaryBuilder.jl/blob/master/docs/src/FAQ.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="常见问题"><a class="docs-heading-anchor" href="#常见问题">常见问题</a><a id="常见问题-1"></a><a class="docs-heading-anchor-permalink" href="#常见问题" title="Permalink"></a></h1><h3 id="我在编译-project-name-here-时遇到问题"><a class="docs-heading-anchor" href="#我在编译-project-name-here-时遇到问题">我在编译 <code>&lt;project name here&gt;</code> 时遇到问题</a><a id="我在编译-project-name-here-时遇到问题-1"></a><a class="docs-heading-anchor-permalink" href="#我在编译-project-name-here-时遇到问题" title="Permalink"></a></h3><p>首先，确保您可以在您尝试编译它的任何平台上本地编译该项目。确保这点后，就在互联网上搜索，看看是否有其他人在为该平台交叉编译该项目时遇到问题。特别是，大多数较小的项目应该没问题，但较大的项目（尤其是任何进行任何类型的引导的项目）可能需要在其构建系统中加入一些额外的智能以支持交叉编译。最后，如果您仍然遇到困难，请尝试通过 JuliaLang slack 中的 <a href="https://julialang.slack.com/archives/C674ELDNX"><code>#binarybuilder</code> 频道</a> 寻求帮助。</p><h3 id="我如何使用它来编译我的-Julia-代码？"><a class="docs-heading-anchor" href="#我如何使用它来编译我的-Julia-代码？">我如何使用它来编译我的 Julia 代码？</a><a id="我如何使用它来编译我的-Julia-代码？-1"></a><a class="docs-heading-anchor-permalink" href="#我如何使用它来编译我的-Julia-代码？" title="Permalink"></a></h3><p>这个包不编译 Julia 代码；它编译 C/C++/Fortran 依赖项。回想你使用 <code>IJulia</code> 并且需要下载/安装 <code>libnettle</code> 的时候。这个包的目的是使生成的压缩包可以尽可能轻松地下载/安装。</p><h3 id="我听说的-macOS-SDK-许可协议是什么？"><a class="docs-heading-anchor" href="#我听说的-macOS-SDK-许可协议是什么？">我听说的 macOS SDK 许可协议是什么？</a><a id="我听说的-macOS-SDK-许可协议是什么？-1"></a><a class="docs-heading-anchor-permalink" href="#我听说的-macOS-SDK-许可协议是什么？" title="Permalink"></a></h3><p>Apple 限制 macOS SDK 的分发和使用，这是为 macOS 目标构建软件的必要组件。请阅读<a href="https://images.apple.com/legal/sla/docs/xcode.pdf">Apple 与 Xcode SDK 协议</a> 以获取更多有关使用 SDK 构建软件时您同意的限制和法律条款的信息适用于苹果操作系统。版权法是一个复杂的领域，您不应从互联网上的常见问题解答中获取法律建议。该工具包旨在主要在 Linux 上运行，但它当然可以在 macOS 机器上的虚拟化环境中使用，或者直接通过运行 Linux Apple 硬件来使用。 Docker runner 在 macOS 机器上实现虚拟化方法。默认情况下，<code>BinaryBuilder.jl</code> 不会在非苹果主机操作系统上自动下载或使用 macOS SDK，除非将 <code>BINARYBUILDER_AUTOMATIC_APPLE</code> 环境变量设置为 <code>true</code>。</p><h3 id="我可以使用其他环境变量吗？"><a class="docs-heading-anchor" href="#我可以使用其他环境变量吗？">我可以使用其他环境变量吗？</a><a id="我可以使用其他环境变量吗？-1"></a><a class="docs-heading-anchor-permalink" href="#我可以使用其他环境变量吗？" title="Permalink"></a></h3><p>是的，<a href="../environment_variables/">看看这里</a>。</p><h3 id="嘿，这很酷，我可以将它用于我的非-Julia-相关项目吗？"><a class="docs-heading-anchor" href="#嘿，这很酷，我可以将它用于我的非-Julia-相关项目吗？">嘿，这很酷，我可以将它用于我的非 Julia 相关项目吗？</a><a id="嘿，这很酷，我可以将它用于我的非-Julia-相关项目吗？-1"></a><a class="docs-heading-anchor-permalink" href="#嘿，这很酷，我可以将它用于我的非-Julia-相关项目吗？" title="Permalink"></a></h3><p>当然！ <code>BinaryBuilder.jl</code> 使用的交叉编译器生成的二进制文件与 Julia 无关。尽管与此软件交互的最佳界面始终是此包中定义的 Julia 界面，但您也可以自由地将这些软件工具用于其他项目。请注意，交叉编译器映像是通过多阶段引导过程构建的，<a href="https://github.com/JuliaPackaging/Yggdrasil">有关详细信息，请参阅此存储库</a>。进一步注意上面的 <strong>macOS SDK 许可协议</strong>。</p><h3 id="在第-XXX-行，中止（不允许操作）！"><a class="docs-heading-anchor" href="#在第-XXX-行，中止（不允许操作）！">在第 XXX 行，中止（不允许操作）！</a><a id="在第-XXX-行，中止（不允许操作）！-1"></a><a class="docs-heading-anchor-permalink" href="#在第-XXX-行，中止（不允许操作）！" title="Permalink"></a></h3><p>一些 linux 发行版在他们的 <code>overlayfs</code> 实现中有一个错误，阻止我们在用户命名空间中安装覆盖文件系统。请参阅<a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1531747">此 Ubuntu 内核错误报告</a>，了解有关情况的描述以及 Ubuntu 如何在其内核中对其进行修补。要解决此问题，您可以在“特权容器”模式下启动 <code>BinaryBuilder.jl</code>。 BinaryBuilder 应该会自动检测这种情况，但是如果自动检测不起作用或者您想消除警告，您可以将 <code>BINARYBUILDER_RUNNER</code> 环境变量设置为 <code>privileged</code>。不幸的是，这涉及在每次启动 BinaryBuilder 会话时运行 <code>sudo</code>，但另一方面，这成功地解决了 Arch linux 等发行版上的问题。</p><h3 id="我必须构建一个没有-Makefile-的非常小的项目，我该怎么办？"><a class="docs-heading-anchor" href="#我必须构建一个没有-Makefile-的非常小的项目，我该怎么办？">我必须构建一个没有 Makefile 的非常小的项目，我该怎么办？</a><a id="我必须构建一个没有-Makefile-的非常小的项目，我该怎么办？-1"></a><a class="docs-heading-anchor-permalink" href="#我必须构建一个没有-Makefile-的非常小的项目，我该怎么办？" title="Permalink"></a></h3><p>BinaryBuilder 需要的是找到整理在 <code>$prefix</code> 目录下的相关文件（共享库或可执行文件等...）：库应该到 <code>${libdir}</code>，可执行文件到 <code>${bindir}</code>。您可能需要创建这些目录。您可以自由选择是创建一个简单的 Makefile 来构建项目，还是在 <code>build_tarballs.jl</code> 脚本中执行所有操作。</p><p>当脚本完成时，BinaryBuilder 期望在 <code>${libdir}</code> 或 <code>${bindir}</code> 中找到至少一个为预期架构构建的工件。</p><p>还请记住，您应该根据需要使用标准环境变量，如 <code>CC</code>、<code>CXX</code>、<code>CFLAGS</code>、<code>LDFLAGS</code> 以便交叉编译。请参阅 <a href="../build_tips/">构建提示</a> 部分中的变量列表。</p><h3 id="我可以在特定的构建环境中打开一个-shell-来进行一些快速测试吗？"><a class="docs-heading-anchor" href="#我可以在特定的构建环境中打开一个-shell-来进行一些快速测试吗？">我可以在特定的构建环境中打开一个 shell 来进行一些快速测试吗？</a><a id="我可以在特定的构建环境中打开一个-shell-来进行一些快速测试吗？-1"></a><a class="docs-heading-anchor-permalink" href="#我可以在特定的构建环境中打开一个-shell-来进行一些快速测试吗？" title="Permalink"></a></h3><p>是的！您可以使用 <a href="../reference/#BinaryBuilderBase.runshell"><code>BinaryBuilder.runshell(platform)</code></a> 在当前目录中快速启动 shell，而无需设置有效的 <code>build_tarballs.jl</code> 脚本。例如，</p><pre><code class="nohighlight hljs">julia -e &#39;using BinaryBuilder; BinaryBuilder.runshell(Platform(&quot;i686&quot;, &quot;windows&quot;))&#39;</code></pre><p>将在 Windows 32 位构建环境中打开一个 shell，不加载任何源代码。您系统的当前工作目录将安装在此 BinaryBuilder 环境中的 <code>${WORKSPACE}</code> 上。</p><h3 id="我可以在不通过-Yggdrasil-的情况下在本地发布-JLL-包吗？"><a class="docs-heading-anchor" href="#我可以在不通过-Yggdrasil-的情况下在本地发布-JLL-包吗？">我可以在不通过 Yggdrasil 的情况下在本地发布 JLL 包吗？</a><a id="我可以在不通过-Yggdrasil-的情况下在本地发布-JLL-包吗？-1"></a><a class="docs-heading-anchor-permalink" href="#我可以在不通过-Yggdrasil-的情况下在本地发布-JLL-包吗？" title="Permalink"></a></h3><p>您始终可以使用 <code>build_tarballs.jl</code> 脚本的 <code>--deploy</code> 标志在您的机器上构建一个 JLL 包。阅读帮助 (<code>--help</code>) 了解更多信息。</p><p>一个常见的用例是，您想为 <code>Libfoo</code> 构建一个 JLL 包，它将用作构建 <code>Quxlib</code> 的依赖项，并且您想要确保同时构建 <code>Libfoo</code> 和 <code>Quxlib</code> 将在将所有拉取请求提交到 <a href="https://github.com/JuliaPackaging/Yggdrasil/">Yggdrasil</a> 之前工作。您可以为 <code>Libfoo</code> 准备 <code>build_tarballs.jl</code> 脚本，然后使用</p><pre><code class="nohighlight hljs">julia build_tarballs.jl --debug --verbose --deploy=&quot;MY_USERNAME/Libfoo_jll.jl&quot;</code></pre><p>将 <code>MY_USERNAME</code> 替换为您的 GitHub 用户名：这将为所有请求的平台构建压缩包，并将它们上传到 <code>MY_USERNAME/Libfoo_jll.jl</code> 的版本，其中也将创建 JLL 包。如上所述，如果您只想编译其中的一些，您可以将参数传递给您要构建 tarball 的平台的三元组列表。在 Julia REPL 中，您可以将此包安装为任何未注册的包</p><pre><code class="language-julia hljs">]add https://github.com/MY_USERNAME/Libfoo_jll.jl.git</code></pre><p>或开发它</p><pre><code class="language-julia hljs">]dev https://github.com/MY_USERNAME/Libfoo_jll.jl.git</code></pre><p>由于此包未注册，您必须使用完整的 <a href="https://julialang.github.io/Pkg.jl/v1/api/#Pkg.PackageSpec"><code>PackageSpec</code></a> 规范将其添加为本地的依赖项 <code>Quxlib</code> 的构建器：</p><pre><code class="language-julia hljs">    Dependency(PackageSpec(; name = &quot;Libfoo_jll&quot;,  uuid = &quot;...&quot;, url = &quot;https://github.com/MY_USERNAME/Libfoo_jll.jl.git&quot;))</code></pre><p>你当然可以反过来构建和部署这个包</p><pre><code class="nohighlight hljs">julia build_tarballs.jl --debug --verbose --deploy=&quot;MY_USERNAME/Quxlib_jll.jl&quot;</code></pre><p>请注意，<code>PackageSpec</code> 也可以指向本地路径：例如，<code>PackageSpec(; name=&quot;Libfoo_jll&quot;, uuid=&quot;...&quot;, path=&quot;/home/myname/.julia/dev/Libfoo_jll&quot;)</code> .这在 <a href="../building/#在本地构建自定义-JLL-包">在本地构建自定义 JLL 包</a> 而不是将其部署到远程 Git 存储库时特别有用。</p><h3 id="源列表中的那些数字是什么？我如何得到它们？"><a class="docs-heading-anchor" href="#源列表中的那些数字是什么？我如何得到它们？">源列表中的那些数字是什么？我如何得到它们？</a><a id="源列表中的那些数字是什么？我如何得到它们？-1"></a><a class="docs-heading-anchor-permalink" href="#源列表中的那些数字是什么？我如何得到它们？" title="Permalink"></a></h3><p>源列表是 <a href="../reference/#BinaryBuilderBase.AbstractSource"><code>BinaryBuilder.AbstractSource</code></a> 的向量。哈希值是什么取决于来源是什么：</p><ul><li>对于 <a href="../reference/#BinaryBuilderBase.FileSource"><code>FileSource</code></a> 或 <a href="../reference/#BinaryBuilderBase.ArchiveSource"><code>ArchiveSource</code></a>，哈希值是 64 个字符的 SHA256 校验和。如果您有该文件的副本，则可以使用 Julia 计算哈希值</li></ul><p><code>julia   using SHA   open(path_to_the_file, &quot;r&quot;) do f        bytes2hex(sha256(f))   end</code>   其中 <code>path_to_the_file</code> 是包含文件路径的字符串。或者，您可以使用命令行实用程序 <code>curl</code> 和 <code>shasum</code> 来计算远程文件的哈希值：</p><p><code>$ curl -L http://example.org/file.tar.gz | shasum -a 256</code></p><p>将 <code>http://example.org/file.tar.gz</code> 替换为您要下载的文件的实际 URL。</p><ul><li>对于 <a href="../reference/#BinaryBuilderBase.GitSource"><code>GitSource</code></a>，哈希值是您要 <code>check out</code> 的修订版的 40 个字符的 SHA1 哈希值。为了可重复性，您必须指出特定的修订版，而不是分支或标签名称，它们是会改变的。</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../jll/">« JLL 包</a><a class="docs-footer-nextpage" href="../troubleshooting/">构建故障排除 »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 9 February 2023 12:31">Thursday 9 February 2023</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
